{% extends "base.html" %}

{% block root_window %}
<!-- Main Scrollable Container -->
<div style="height: 100%; overflow-y: auto; padding: 0.5rem; display: flex; flex-direction: column;">

    <!-- Image Grid -->
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">
        
        {% for asset_path in section.assets %}
            {% if asset_path is matching("[.](jpg|png|jpeg|webp)$") %}
            
                {% set thumbnail = resize_image(path=asset_path, width=400, op="fit_width") %}

                <div class="window gallery-item" style="height: 350px;">
                    <div class="window__header">
                        <span class="title">sxiv {{ asset_path | split(pat="/") | last }}</span>
                        <div class="controls">
                            <div class="dot dot--yellow"></div>
                        </div>
                    </div>
                    
                    <div class="window__body" style="padding: 0; display: flex; align-items: center; justify-content: center; background-color: #000; position: relative; height: 100%;">
                        <!-- Link points to the FULL SIZE original asset -->
                        <a href="{{ get_url(path=asset_path) }}" target="_blank" style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                            <!-- thumbnail -->
                            <img src="{{ thumbnail.url }}" 
                                 alt="{{ asset_path | split(pat="/") | last }}" 
                                 loading="lazy" 
                                 style="max-width: 100%; max-height: 100%; object-fit: contain; border: none; margin: 0;">
                        </a>
                    </div>
                </div>

            {% endif %}
        {% endfor %}
    </div>
    
</div>
{% endblock root_window %}
